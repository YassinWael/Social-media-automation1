{% extends "base.html" %}

{% block title %}Your Posts{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Posts for {{ page_name }}</h1>
    <h2>Niche: <span class="badge bg-secondary">{{ niche }}</span></h2>
</div>

<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-title">Create a new post</h5>
        <form action="{{ url_for('post_to_page',page_id=page_id) }}" method="post">
            <div class="mb-3">
                <textarea class="form-control" name="message" rows="3" placeholder="What's on your mind?"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Post</button>
        </form>
    </div>
</div>

<h3>Auto Generated Posts</h3>
<a href="{{ url_for('generate_posts', page_id=page_id) }}" class="btn btn-primary">Generate Post</a>
<img src="{{ image }}" alt="">






<h3>Published Posts</h3>
{% for post in posts %}
<div class="card mb-3">
    <div class="card-body">
        <p class="card-text">{{ post.message }}</p>
        <p class="card-text"><small class="text-muted">Posted on {{ post.created_time }}</small></p>
        <a href="{{ post.permalink_url }}" target="_blank" class="btn btn-sm btn-outline-secondary">View on Facebook</a>
    </div>
</div>
{% else %}
<p>No posts found for this page.</p>
{% endfor %}
{% endblock %}